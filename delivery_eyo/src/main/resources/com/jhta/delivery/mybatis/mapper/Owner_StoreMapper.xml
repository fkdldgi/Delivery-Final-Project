<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mybatis.Owner_StoreMapper">	
	<!-- 대표메뉴 리스트 가져오기 -->
	<select id="mainMenuList" parameterType="int" resultType="com.jhta.delivery.vo.MenuVo">
		select * from menu
		where menu_category_num=(select num from MENU_CATEGORY 
                               	where shop_num=(select num 
												from shop 
												where num=#{num}) 
                                and main_menu=1) 
        order by priority asc
	</select>
	
	<!-- 메뉴삭제 -->
	<delete id="deleteMenu" parameterType="int">
		delete from menu where num=#{num}
	</delete>
	
	<!-- 메뉴카테고리 삭제 -->
	<delete id="deleteMenu_Category" parameterType="int">
		delete from menu_category where num=#{num}
	</delete>
	
	<!-- 메뉴카테고리 추가 -->
	<insert id="insertMenu_Category" parameterType="com.jhta.delivery.vo.MenuCategoryVo">
		insert from menu_category
		values(num=#{num},name=#{name},
				priority=#{priority},shop_num=#{shop_num},
				main_menu=#{main_menu})
	</insert>
	
	<!-- 메뉴카테고리 수정 -->
	<update id="updateMenu_Category" parameterType="com.jhta.delivery.vo.MenuCategoryVo">
		update menu_category
		set(name=#{name})
		where num=#{num} and shop_num=#{shop_num}
	</update>
</mapper>